<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo Tour Mới</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <%- include('../../DashboardPN', { pageTitle: 'Tạo Tour Mới' }) %>  

<div class="container mt-4">
    <h2 class="text-center">Tạo Tour Mới</h2>

    <form action="/partner/tours/create" method="POST" enctype="multipart/form-data">
        <div class="mb-3">
            <label for="title" class="form-label">Tiêu đề Tour</label>
            <input type="text" class="form-control" id="title" name="title" required>
        </div>

        <div class="mb-3">
            <label for="description" class="form-label">Mô tả Tour</label>
            <textarea class="form-control" id="description" name="description" rows="4" required></textarea>
        </div>

        <div class="mb-3">
            <label for="price" class="form-label">Giá Tour (VND)</label>
            <input type="number" class="form-control" id="price" name="price" required>
        </div>

        <div class="mb-3">
            <label for="location" class="form-label">Địa điểm</label>
            <input type="text" class="form-control" id="location" name="location" required>
        </div>

        <div class="mb-3">
            <label for="totalSpots" class="form-label">Số chỗ (cho tất cả các ngày)</label>
            <input type="number" class="form-control" id="totalSpots" name="totalSpots" required min="1">
        </div>
        
        <div class="mb-3">
            <label for="duration" class="form-label">Thời gian (Số ngày)</label>
            <input type="number" class="form-control" id="duration" name="duration" required min="1" oninput="generateScheduleFields()">
        </div>

        <div class="mb-3">
            <label for="tourType" class="form-label">Loại Tour</label>
            <select class="form-control" id="tourType" name="tourType" required>
                <% tourTypes.forEach(function(type) { %>
                    <option value="<%= type._id %>"><%= type.name %></option>
                <% }) %>
            </select>
        </div>

        <div class="mb-3">
            <label for="destination" class="form-label">Địa điểm Tour</label>
            <select class="form-control" id="destination" name="destination" required>
                <% destinations.forEach(function(dest) { %>
                    <option value="<%= dest._id %>"><%= dest.name %></option>
                <% }) %>
            </select>
        </div>

        <div class="mb-3" id="scheduleFields"></div>

        <div class="mb-3">
            <label for="images" class="form-label">Hình ảnh (Chọn nhiều ảnh nếu cần)</label>
            <input type="file" class="form-control" id="images" name="images" multiple>
        </div>

        <div class="mb-3">
            <label for="videos" class="form-label">Video</label>
            <input type="file" class="form-control" id="videos" name="videos" multiple>
        </div>

        <button type="submit" class="btn btn-primary">Tạo Tour</button>
    </form>
</div>

<script>
    function generateScheduleFields() {
        let duration = document.getElementById('duration').value;
        let scheduleFieldsContainer = document.getElementById('scheduleFields');
        scheduleFieldsContainer.innerHTML = '';  // Clear previous fields
        
        // Create schedule fields dynamically based on the duration
        for (let i = 1; i <= duration; i++) {
            let inputGroup = document.createElement('div');
            inputGroup.classList.add('mb-3');
            inputGroup.innerHTML = `
                <label for="schedules_${i}" class="form-label">Ngày ${i}: Mô tả hoạt động</label>
                <input type="text" class="form-control" name="schedules[${i}]" placeholder="Mô tả cho ngày ${i}">
               
            `;
            scheduleFieldsContainer.appendChild(inputGroup);
        }
    }
</script>
</body>
</html>
